name: Flutter

on:
    push:
        branches: ["master"]
    pull_request:
        branches: ["master"]

jobs:
    build:
        strategy:
            matrix:
                os: [ubuntu-latest, windows-latest, macOS-latest]

        runs-on: ${{ matrix.os }}

        steps:
            - uses: actions/checkout@v3

            # Note: This workflow uses the latest stable version of the Dart SDK.
            # You can specify other versions if desired, see documentation here:
            # https://github.com/dart-lang/setup-dart/blob/main/README.md
            # - uses: dart-lang/setup-dart@v1
            - uses: dart-lang/setup-dart@9a04e6d73cca37bd455e0608d7e5092f881fd603

            - name: Install dependencies
              run: flutter pub get

            - name: Verify formatting
              run: flutter format --output=none --set-exit-if-changed .

            - name: Analyze project source
              run: flutter analyze

            - name: Build
              run: flutter build
