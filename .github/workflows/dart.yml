name: Flutter

on:
    push:
        branches: ["master"]
    pull_request:
        branches: ["master"]

jobs:
    build:
        strategy:
            matrix:
                os: [ubuntu-latest, windows-latest, macOS-latest]

        runs-on: ${{ matrix.os }}

        steps:
            - uses: actions/checkout@v3

            - name: Install Flutter
              uses: britannio/action-install-flutter@v1

            - name: Install dependencies
              run: flutter pub get

            - name: Verify formatting
              run: flutter format --output=none --set-exit-if-changed .

            - name: Analyze project source
              run: flutter analyze

            - name: Build
              run: flutter build
